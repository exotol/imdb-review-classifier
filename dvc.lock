schema: '2.0'
stages:
  data_split:
    cmd: python -m imdb_review_classifier.pipelines.data_split --path_to_config=configs/baseline.yaml
    deps:
    - path: data/raw/imdb_dataset.csv
      md5: 308443a50e5c993e7b8a1cdb95750026
      size: 66212309
    - path: imdb_review_classifier/pipelines/data_split.py
      md5: 71e490535a9201dbdad67757bf68893f
      size: 1213
    params:
      configs/baseline.yaml:
        base:
          seed: 100500
        data_split:
          raw_data: data/raw/imdb_dataset.csv
          test_size: 0.2
          train_path: data/split/train.csv
          test_path: data/split/test.csv
    outs:
    - path: data/split/test.csv
      md5: 4279918fa2315ab43852446f5b846215
      size: 13193722
    - path: data/split/train.csv
      md5: e91174c30f08e589561364b57e63f404
      size: 53018604
  features:
    cmd: python -m imdb_review_classifier.pipelines.featurize --path_to_config=configs/baseline.yaml
    deps:
    - path: data/split/train.csv
      md5: e91174c30f08e589561364b57e63f404
      size: 53018604
    - path: imdb_review_classifier/pipelines/featurize.py
      md5: 10ce04a135b5d028a2f7f079fe98ff91
      size: 1492
    params:
      configs/baseline.yaml:
        data_split:
          raw_data: data/raw/imdb_dataset.csv
          test_size: 0.2
          train_path: data/split/train.csv
          test_path: data/split/test.csv
        features:
          vectorizer:
            analyzer: word
            min_df: 3
          save:
            model_file_name: models/count_vectorizer
            train_data_file: data/features/x_train
            target_train_file: data/features/y_train
            train_data: data/features/train
    outs:
    - path: data/features/train
      md5: 972d5e51884a564a513354d7a0718bb6
      size: 69608171
    - path: models/count_vectorizer
      md5: 8d8edbaa77d3179b825580d2b03421ae
      size: 1760001
  train:
    cmd: python -m imdb_review_classifier.pipelines.train --path_to_config=configs/baseline.yaml
    deps:
    - path: data/features/train
      md5: 972d5e51884a564a513354d7a0718bb6
      size: 69608171
    - path: imdb_review_classifier/pipelines/train.py
      md5: e4c6333bb0608be49996cb0eed140de8
      size: 911
    params:
      configs/baseline.yaml:
        base:
          seed: 100500
        features:
          vectorizer:
            analyzer: word
            min_df: 3
          save:
            model_file_name: models/count_vectorizer
            train_data_file: data/features/x_train
            target_train_file: data/features/y_train
            train_data: data/features/train
        train:
          save:
            model_path: models/lin_reg
    outs:
    - path: models/lin_reg
      md5: 72fe901758140993a7a286079c8f3857
      size: 543855
